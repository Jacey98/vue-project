(function(t){function e(e){for(var n,r,a=e[0],c=e[1],u=e[2],h=0,m=[];h<a.length;h++)r=a[h],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(m.length)m.shift()();return o.push.apply(o,u||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,a=1;a<i.length;a++){var c=i[a];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},s={app:0},o=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"1a7c":function(t,e,i){"use strict";i("4f97")},"298e":function(t,e,i){"use strict";i("4d55")},"4d55":function(t,e,i){},"4f97":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showGame?i("mine-sweeping",{attrs:{"game-info":t.gameInfo,"show-game":t.showGame},on:{"update:showGame":function(e){t.showGame=e},"update:show-game":function(e){t.showGame=e}}}):i("select-level",{on:{"chose-level":t.choseLevel}})},o=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("div",[t._v("难 度")]),i("ul",[t._l(t.level,(function(e,n){return i("li",{key:n,on:{click:function(i){return t.handleChoseLevel(e.value)}}},[t._v(" "+t._s(e.text)+" ")])})),i("li",{on:{click:function(e){t.showForm=!t.showForm}}},[t._v("🌞 自定义")])],2),t.showForm?i("auto-form"):t._e()],1)},a=[],c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._v("表单组件待施工")])},u=[],l={name:"autoForm",components:{},data:function(){return{}},methods:{}},h=l,m=i("2877"),f=Object(m["a"])(h,c,u,!1,null,"1b4124f4",null),p=f.exports,v={name:"mineSweeping",components:{AutoForm:p},data:function(){return{showForm:!1,level:[{text:"⭐ LEVEL1",value:[9,9,10]},{text:"⭐ LEVEL2",value:[16,9,20]},{text:"⭐ LEVEL3",value:[16,16,30]}]}},methods:{handleChoseLevel:function(t){this.$emit("chose-level",t)}}},d=v,w=(i("298e"),Object(m["a"])(d,r,a,!1,null,"4d7d8312",null)),g=w.exports,k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("div",{staticClass:"tool-content"},[i("span",{staticClass:"btn",on:{click:t.changeLevel}},[t._v("更换难度")]),i("span",[t._v("雷数："+t._s(t.gameInfo[2]-t.markNum))]),i("span",[t._v("用时："+t._s(t.time)+" s")]),i("span",{staticClass:"btn",on:{click:t.reStart}},[t._v("重新开始")])]),i("div",{staticClass:"game-content"},t._l(t.cols,(function(e){return i("div",{key:Math.random()+e,staticClass:"game-content-row"},t._l(t.rows,(function(n){return i("span",{key:Math.random()+n,staticClass:"game-block",class:[t.lattice[(e-1)*t.rows+n-1].isOpen?"open":"",0!==t.over&&(t.lattice[(e-1)*t.rows+n-1].isMark||t.lattice[(e-1)*t.rows+n-1].isMine)?"open":""],on:{click:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:void t.leftClick(t.lattice[(e-1)*t.rows+n-1])},contextmenu:function(i){i.preventDefault(),t.rightClick(t.lattice[(e-1)*t.rows+n-1])},dblclick:function(i){t.ondblClick(t.lattice[(e-1)*t.rows+n-1])}}},[0!==t.over&&t.lattice[(e-1)*t.rows+n-1].isMine?i("span",[t._v("💣")]):0===t.over&&t.lattice[(e-1)*t.rows+n-1].isMark?i("span",[t._v("🚩")]):0!==t.lattice[(e-1)*t.rows+n-1].mineNum?i("span",[t._v(t._s(t.lattice[(e-1)*t.rows+n-1].mineNum))]):i("span",[t._v(" ")])])})),0)})),0)])},b=[],M=i("2909"),O=(i("99af"),i("d3b7"),i("159b"),i("a434"),i("6062"),i("3ca3"),i("ddb0"),{name:"mineSweeping",components:{},props:{showGame:{required:!0,type:Boolean},gameInfo:{required:!0,type:Array}},data:function(){return{rows:0,cols:0,latticeNum:0,markNum:0,openNum:0,minePosition:[],minePositionBake:[],lattice:{index:0,mineNum:0,isMine:!1,isOpen:!1,isMark:!1},over:0,time:0,interval:null,successNum:0,failNum:0}},computed:{timeText:function(){return this.time}},watch:{over:function(t){var e=this;switch(t){case 1:this.failNum++,clearInterval(this.interval),setTimeout((function(){alert("\n            很遗憾，您失败了\n\n            成功局数：".concat(e.successNum,"\n            失败局数：").concat(e.failNum,"\n            "))}),0);break;case 2:this.successNum++,clearInterval(this.interval),setTimeout((function(){alert("\n            恭喜，扫雷成功！\n\n            成功局数：".concat(e.successNum,"\n            失败局数：").concat(e.failNum,"\n            "))}),0);break}}},created:function(){this.rows=this.gameInfo[0],this.cols=this.gameInfo[1],this.latticeNum=this.rows*this.cols,this.init(),document.onselectstart=function(){return!1}},mounted:function(){this.setTime()},beforeDestroy:function(){clearInterval(this.interval)},methods:{init:function(){this.markNum=0,this.openNum=0,this.minePosition=[],this.minePositionBake=[],this.lattice={index:0,mineNum:0,isMine:!1,isOpen:!1,isMark:!1},this.over=0,this.time=0,this.getMinePosition(),this.initLattice()},setTime:function(){var t=this;clearInterval(this.interval),this.interval=setInterval((function(){t.time++}),1e3)},getMinePosition:function(){for(var t=[],e=0;e<this.gameInfo[2];e++){var i=Math.floor(Math.random()*this.latticeNum);-1===t.indexOf(i)?t.push(i):e--}this.minePosition=t,this.minePositionBake=[].concat(t)},initLattice:function(){for(var t=[],e=0;e<this.latticeNum;e++){var i={index:e,isOpen:!1,mineNum:0,isMark:!1};i.isMine=this.minePosition.indexOf(e)>-1,i.isMine||this.getMineNumAroundLattice(i,e),t.push(i)}this.lattice=t},getMineNumAroundLattice:function(t,e){var i=this,n=this.getLatticeIndex(e);n.forEach((function(e){i.minePosition.indexOf(e)>-1&&t.mineNum++}))},getLatticeIndex:function(t){t++;for(var e=[],i=Math.ceil(t/this.rows),n=Math.ceil(t%this.rows)||this.rows,s=1===i?0:-1;s<(i===this.cols?1:2);s++)for(var o=1===n?0:-1;o<(n===this.rows?1:2);o++){var r=(i+s-1)*this.rows+(n+o);e.push(r-1)}return e},leftClick:function(t){if(this.over)return!1;if(!t.isOpen&&t.isMine)t.isOpen=!0,this.over=1;else if(this.openNum++,t.mineNum)t.isOpen||t.isMark||(t.isOpen=!0);else{var e=this.getLatticeIndex(t.index);this.showWhiteAround(t,e)}},rightClick:function(t){if(this.over)return!1;t.isOpen?t.isMark&&(t.isMark=!1,t.isOpen=!1,this.markNum--,this.openNum--,t.isMine&&this.minePosition.push(t.index)):(t.isMark=!0,t.isOpen=!0,this.markNum++,this.openNum++,t.isMine&&this.minePosition.splice(this.minePosition.indexOf(t.index),1)),this.markNum===this.gameInfo[2]&&this.judgeIsOver()},ondblClick:function(t){var e=this;if(console.log(1),t.isOpen&&!t.isMark){for(var i=this.getLatticeIndex(t.index),n=0,s=!1,o=[],r=0;r<i.length;r++)this.lattice[i[r]].isMark?n++:this.lattice[i[r]].isMine?s=!0:o.push(i[r]);n===t.mineNum&&(s?this.over=1:o.forEach((function(t){e.lattice[t-1].isOpen=!0})))}},judgeIsOver:function(){this.over=0===this.minePosition.length?2:0},judgeWrongMark:function(){var t=this,e=0;return this.minePositionBake.forEach((function(i){t.lattice[i].isMark||e++})),e},showWhiteAround:function(t,e){e=Object(M["a"])(new Set(e));for(var i=0;i<e.length;i++){var n=e[i];if(e.splice(i,1),i--,!this.lattice[n].isOpen&&(this.lattice[n].isOpen=!0,!this.lattice[n].mineNum)){var s=this.getLatticeIndex(this.lattice[n].index);this.showWhiteAround(this.lattice[n],e.concat(s))}}},reStart:function(){this.init(),this.setTime()},changeLevel:function(){this.$emit("update:showGame",!1)}}}),_=O,x=(i("1a7c"),Object(m["a"])(_,k,b,!1,null,"ab8cb50e",null)),N=x.exports,y={name:"app",components:{SelectLevel:g,MineSweeping:N},data:function(){return{showGame:!0,gameInfo:[9,9,10]}},methods:{choseLevel:function(t){this.gameInfo=t,this.showGame=!0}}},L=y,P=Object(m["a"])(L,s,o,!1,null,null,null),I=P.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(I)}}).$mount("#app")}});
//# sourceMappingURL=app.0bf35c66.js.map